<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation for doti18n library"><meta name=author content=darkj3suss><link href=https://darkj3suss.github.io/doti18n/usage/icumf/ rel=canonical><link href=../formatting/ rel=prev><link href=../custom_loaders/ rel=next><link rel=icon href=../../assets/images/favicon.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>ICU Message Format - doti18n</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=deep-purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#syntax class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=doti18n class="md-header__button md-logo" aria-label=doti18n data-md-component=logo> <img src=../../assets/images/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> doti18n </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> ICU Message Format </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=deep-purple aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=deep-purple aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/darkj3suss/doti18n title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../getting_started/ class=md-tabs__link> Getting Started </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../configuration/ class=md-tabs__link> Usage </a> </li> <li class=md-tabs__item> <a href=../../cli/stub/ class=md-tabs__link> CLI </a> </li> <li class=md-tabs__item> <a href=../../integrations/setup/ class=md-tabs__link> Integrations </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=doti18n class="md-nav__button md-logo" aria-label=doti18n data-md-component=logo> <img src=../../assets/images/logo.svg alt=logo> </a> doti18n </label> <div class=md-nav__source> <a href=https://github.com/darkj3suss/doti18n title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../getting_started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Usage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Usage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../supported_formats/ class=md-nav__link> <span class=md-ellipsis> Supported Formats </span> </a> </li> <li class=md-nav__item> <a href=../pluralization/ class=md-nav__link> <span class=md-ellipsis> Pluralization </span> </a> </li> <li class=md-nav__item> <a href=../formatting/ class=md-nav__link> <span class=md-ellipsis> Formatting </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> ICU Message Format </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> ICU Message Format </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#syntax class=md-nav__link> <span class=md-ellipsis> Syntax </span> </a> </li> <li class=md-nav__item> <a href=#basic-example class=md-nav__link> <span class=md-ellipsis> Basic Example </span> </a> </li> <li class=md-nav__item> <a href=#manage-icumf class=md-nav__link> <span class=md-ellipsis> Manage ICUMF </span> </a> <nav class=md-nav aria-label="Manage ICUMF"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#disabling-icumf class=md-nav__link> <span class=md-ellipsis> Disabling ICUMF </span> </a> </li> <li class=md-nav__item> <a href=#forcing-icumf class=md-nav__link> <span class=md-ellipsis> Forcing ICUMF </span> </a> </li> <li class=md-nav__item> <a href=#advanced-configuration class=md-nav__link> <span class=md-ellipsis> Advanced Configuration </span> </a> </li> <li class=md-nav__item> <a href=#parser-parameters class=md-nav__link> <span class=md-ellipsis> Parser Parameters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#variable-interpolation class=md-nav__link> <span class=md-ellipsis> Variable Interpolation </span> </a> </li> <li class=md-nav__item> <a href=#pluralization-and-selectordinal class=md-nav__link> <span class=md-ellipsis> Pluralization and Selectordinal </span> </a> </li> <li class=md-nav__item> <a href=#select class=md-nav__link> <span class=md-ellipsis> Select </span> </a> </li> <li class=md-nav__item> <a href=#formatters class=md-nav__link> <span class=md-ellipsis> Formatters </span> </a> </li> <li class=md-nav__item> <a href=#escaping class=md-nav__link> <span class=md-ellipsis> Escaping </span> </a> </li> <li class=md-nav__item> <a href=#nesting class=md-nav__link> <span class=md-ellipsis> Nesting </span> </a> </li> <li class=md-nav__item> <a href=#whitespaces class=md-nav__link> <span class=md-ellipsis> Whitespaces </span> </a> </li> <li class=md-nav__item> <a href=#custom-formatters class=md-nav__link> <span class=md-ellipsis> Custom Formatters </span> </a> <nav class=md-nav aria-label="Custom Formatters"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#requirements class=md-nav__link> <span class=md-ellipsis> Requirements </span> </a> </li> <li class=md-nav__item> <a href=#example-implementation class=md-nav__link> <span class=md-ellipsis> Example Implementation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tags-html-support class=md-nav__link> <span class=md-ellipsis> Tags &amp; HTML Support </span> </a> <nav class=md-nav aria-label="Tags & HTML Support"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#basic-usage class=md-nav__link> <span class=md-ellipsis> Basic Usage </span> </a> </li> <li class=md-nav__item> <a href=#custom-tag-processing-html-to-markdown class=md-nav__link> <span class=md-ellipsis> Custom Tag Processing (HTML to Markdown) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../custom_loaders/ class=md-nav__link> <span class=md-ellipsis> Custom Loaders </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> CLI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> CLI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cli/stub/ class=md-nav__link> <span class=md-ellipsis> Stub Generation </span> </a> </li> <li class=md-nav__item> <a href=../../cli/lint/ class=md-nav__link> <span class=md-ellipsis> Linting Translations </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Integrations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../integrations/setup/ class=md-nav__link> <span class=md-ellipsis> Setup </span> </a> </li> <li class=md-nav__item> <a href=../../integrations/telegram_api/ class=md-nav__link> <span class=md-ellipsis> Telegram API </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> Web </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Web </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../integrations/fastapi/ class=md-nav__link> <span class=md-ellipsis> FastAPI </span> </a> </li> <li class=md-nav__item> <a href=../../integrations/django/ class=md-nav__link> <span class=md-ellipsis> Django </span> </a> </li> <li class=md-nav__item> <a href=../../integrations/flask/ class=md-nav__link> <span class=md-ellipsis> Flask </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>ICU Message Format</h1> <p>ICU Message Format (ICUMF) is powered by its own parser and formatter within doti18n. For pluralization, it follows <a href=https://cldr.unicode.org/index/cldr-spec/plural-rules>CLDR Plural Rules</a>, which are powered by <a href=https://babel.pocoo.org/ >Babel</a>.</p> <h2 id=syntax>Syntax<a class=headerlink href=#syntax title="Permanent link">#</a></h2> <p>ICUMF uses a specific syntax for defining messages, including pluralization, selection, and variable interpolation.</p> <ul> <li><strong>Variable Interpolation</strong>: <code>{variable}</code></li> <li><strong>Hash</strong>: In sub-numeric formatters (<code>plural</code>, <code>selectordinal</code>), <code>#</code> represents the <code>count</code> value.</li> <li><strong>Pluralization</strong>: <code>{variable, plural, one {singular form} other {plural form}}</code></li> <li><strong>Selectordinal</strong>: <code>{variable, selectordinal, one {1st form} two {2nd form} few {3rd form} other {default form}}</code></li> <li><strong>Select</strong>: <code>{variable, select, option1 {text1} option2 {text2} other {default text}}</code></li> <li><strong>Formatters</strong>: <code>{variable, formatter, style}</code> (e.g., for dates).</li> <li><strong>Escaping</strong>: Use single quotes <code>'</code> to escape the next character. To include a literal single quote, use two single quotes <code>''</code>.</li> <li><strong>Nesting</strong>: ICUMF supports nested constructs for complex messages.</li> <li><strong>Whitespace</strong>: Ignored outside of the message text.</li> </ul> <h2 id=basic-example>Basic Example<a class=headerlink href=#basic-example title="Permanent link">#</a></h2> <div class="tabbed-set tabbed-alternate" data-tabs=1:3><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><input id=__tabbed_1_3 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>YAML</label><label for=__tabbed_1_2>JSON</label><label for=__tabbed_1_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nt>cat</span><span class=p>:</span><span class=w> </span><span class=s>&quot;I</span><span class=nv> </span><span class=s>have</span><span class=nv> </span><span class=s>{count,</span><span class=nv> </span><span class=s>plural,</span><span class=nv> </span><span class=s>one</span><span class=nv> </span><span class=s>{#</span><span class=nv> </span><span class=s>cat}</span><span class=nv> </span><span class=s>other</span><span class=nv> </span><span class=s>{#</span><span class=nv> </span><span class=s>cats}}&quot;</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=p>{</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>    </span><span class=nt>&quot;cat&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;I have {count, plural, one {# cat} other {# cats}}&quot;</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>    </span><span class=nt>&lt;cat&gt;</span>I<span class=w> </span>have<span class=w> </span>{count,<span class=w> </span>plural,<span class=w> </span>one<span class=w> </span>{#<span class=w> </span>cat}<span class=w> </span>other<span class=w> </span>{#<span class=w> </span>cats}}<span class=nt>&lt;/cat&gt;</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <p><strong>Usage:</strong></p> <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>)</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>cat</span><span class=p>(</span><span class=n>count</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>   <span class=c1># Output: I have 1 cat</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>cat</span><span class=p>(</span><span class=n>count</span><span class=o>=</span><span class=mi>3</span><span class=p>))</span>   <span class=c1># Output: I have 3 cats</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>cat</span><span class=p>(</span><span class=n>count</span><span class=o>=</span><span class=mi>11</span><span class=p>))</span>  <span class=c1># Output: I have 11 cats</span>
</span></code></pre></div> <h2 id=manage-icumf>Manage ICUMF<a class=headerlink href=#manage-icumf title="Permanent link">#</a></h2> <p>By default, doti18n automatically enables ICUMF parsing with standard settings. However, you can customize its behavior, adjust performance settings, or disable it entirely.</p> <p>To do this, you need to manually configure the <code>Loader</code> and inject it into <code>LocaleData</code>.</p> <h3 id=disabling-icumf>Disabling ICUMF<a class=headerlink href=#disabling-icumf title="Permanent link">#</a></h3> <p>If you don't use ICUMF features and want to avoid the parsing overhead, or if your strings contain characters that conflict with ICUMF syntax (like <code>{}</code> used for other purposes), you can disable it.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n.loaders</span><span class=w> </span><span class=kn>import</span> <span class=n>Loader</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=c1># 1. Create a loader with ICUMF disabled</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=n>loader</span> <span class=o>=</span> <span class=n>Loader</span><span class=p>(</span><span class=n>icumf</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=c1># 2. Inject the loader into LocaleData</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>,</span> <span class=n>loader</span><span class=o>=</span><span class=n>loader</span><span class=p>)</span>
</span></code></pre></div> <h3 id=forcing-icumf>Forcing ICUMF<a class=headerlink href=#forcing-icumf title="Permanent link">#</a></h3> <p>If for some reason ICUMF doesn't parse your strings automatically (e.g., due to conflicts with other formatting styles), you can force-enable it via marking strings in your localization files. This <code>icu:</code> prefix tells doti18n to always treat the string as ICUMF. doti18n will delete the prefix before parsing.</p> <div class="tabbed-set tabbed-alternate" data-tabs=2:3><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><input id=__tabbed_2_3 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>YAML</label><label for=__tabbed_2_2>JSON</label><label for=__tabbed_2_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>cat</span><span class=p>:</span><span class=w> </span><span class=s>&quot;icu:I</span><span class=nv> </span><span class=s>have</span><span class=nv> </span><span class=s>{count,</span><span class=nv> </span><span class=s>plural,</span><span class=nv> </span><span class=s>one</span><span class=nv> </span><span class=s>{#</span><span class=nv> </span><span class=s>cat}</span><span class=nv> </span><span class=s>other</span><span class=nv> </span><span class=s>{#</span><span class=nv> </span><span class=s>cats}}&quot;</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=p>{</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span><span class=nt>&quot;cat&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;icu:I have {count, plural, one {# cat} other {# cats}}&quot;</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>    </span><span class=nt>&lt;cat&gt;</span>icu:I<span class=w> </span>have<span class=w> </span>{count,<span class=w> </span>plural,<span class=w> </span>one<span class=w> </span>{#<span class=w> </span>cat}<span class=w> </span>other<span class=w> </span>{#<span class=w> </span>cats}}<span class=nt>&lt;/cat&gt;</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <h3 id=advanced-configuration>Advanced Configuration<a class=headerlink href=#advanced-configuration title="Permanent link">#</a></h3> <p>To adjust the cache size or parser behavior, you need to create an <code>ICUMF</code> instance manually and pass it to the loader.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n.loaders</span><span class=w> </span><span class=kn>import</span> <span class=n>Loader</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n.icumf</span><span class=w> </span><span class=kn>import</span> <span class=n>ICUMF</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=c1># 1. Configure ICUMF</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=n>icumf</span> <span class=o>=</span> <span class=n>ICUMF</span><span class=p>(</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>    <span class=n>cache_size</span><span class=o>=</span><span class=mi>2048</span><span class=p>,</span>      <span class=c1># Increase cache for rendered strings</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>    <span class=n>strict</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>          <span class=c1># Enforce strict validation</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>    <span class=c1># Parser options (passed via kwargs)</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>    <span class=n>depth_limit</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span>       <span class=c1># Limit nesting depth</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>    <span class=n>allow_tags</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>     <span class=c1># Disable HTML-like tag parsing</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>    <span class=n>require_other</span><span class=o>=</span><span class=kc>False</span>   <span class=c1># Don&#39;t require &#39;other&#39; in plural/selectordinal (not recommended, it may break doti18n logic)</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=p>)</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=c1># 2. Create Loader with custom ICUMF</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=n>loader</span> <span class=o>=</span> <span class=n>Loader</span><span class=p>(</span><span class=n>icumf</span><span class=o>=</span><span class=n>icumf</span><span class=p>)</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a><span class=c1># 3. Initialize LocaleData</span>
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>,</span> <span class=n>loader</span><span class=o>=</span><span class=n>loader</span><span class=p>)</span>
</span></code></pre></div> <h3 id=parser-parameters>Parser Parameters<a class=headerlink href=#parser-parameters title="Permanent link">#</a></h3> <p>These parameters are passed as keyword arguments (<code>**kwargs</code>) to the <code>ICUMF</code> constructor and control the internal <code>Parser</code>.</p> <table> <thead> <tr> <th style="text-align: left;">Parameter</th> <th style="text-align: left;">Type</th> <th style="text-align: left;">Default</th> <th style="text-align: left;">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left;"><code>cache_size</code></td> <td style="text-align: left;"><code>int</code></td> <td style="text-align: left;"><code>1024</code></td> <td style="text-align: left;">The maximum number of rendered strings to keep in memory (LRU Cache).</td> </tr> <tr> <td style="text-align: left;"><code>depth_limit</code></td> <td style="text-align: left;"><code>int</code></td> <td style="text-align: left;"><code>50</code></td> <td style="text-align: left;">Maximum recursion depth for nested messages. Prevents stack overflow on malformed strings.</td> </tr> <tr> <td style="text-align: left;"><code>allow_tags</code></td> <td style="text-align: left;"><code>bool</code></td> <td style="text-align: left;"><code>True</code></td> <td style="text-align: left;">Enables parsing of HTML/XML-like tags (e.g., <code>&lt;b&gt;Bold&lt;/b&gt;</code>).</td> </tr> <tr> <td style="text-align: left;"><code>strict_tags</code></td> <td style="text-align: left;"><code>bool</code></td> <td style="text-align: left;"><code>True</code></td> <td style="text-align: left;">If <code>True</code>, ensures that closing tags match opening tags (e.g., <code>&lt;b&gt;...&lt;/i&gt;</code> raises an error).</td> </tr> <tr> <td style="text-align: left;"><code>tag_prefix</code></td> <td style="text-align: left;"><code>str</code></td> <td style="text-align: left;"><code>None</code></td> <td style="text-align: left;">If set, only tags starting with this prefix are parsed.</td> </tr> <tr> <td style="text-align: left;"><code>require_other</code></td> <td style="text-align: left;"><code>bool</code></td> <td style="text-align: left;"><code>True</code></td> <td style="text-align: left;">If <code>True</code>, requires an <code>other</code> option in <code>plural</code>, <code>select</code>, and <code>selectordinal</code> formats.</td> </tr> <tr> <td style="text-align: left;"><code>allow_format_spaces</code></td> <td style="text-align: left;"><code>bool</code></td> <td style="text-align: left;"><code>True</code></td> <td style="text-align: left;">Allows whitespace inside format arguments (e.g., <code>{ count, plural, ... }</code>).</td> </tr> </tbody> </table> <h2 id=variable-interpolation>Variable Interpolation<a class=headerlink href=#variable-interpolation title="Permanent link">#</a></h2> <p>If you want to include additional variables in your messages, simply add them to the message string and pass them as keyword arguments.</p> <div class="tabbed-set tabbed-alternate" data-tabs=3:3><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><input id=__tabbed_3_2 name=__tabbed_3 type=radio><input id=__tabbed_3_3 name=__tabbed_3 type=radio><div class=tabbed-labels><label for=__tabbed_3_1>YAML</label><label for=__tabbed_3_2>JSON</label><label for=__tabbed_3_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nt>greeting</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Hello,</span><span class=nv> </span><span class=s>{name}!</span><span class=nv> </span><span class=s>You</span><span class=nv> </span><span class=s>have</span><span class=nv> </span><span class=s>{count,</span><span class=nv> </span><span class=s>plural,</span><span class=nv> </span><span class=s>one</span><span class=nv> </span><span class=s>{#</span><span class=nv> </span><span class=s>new</span><span class=nv> </span><span class=s>message}</span><span class=nv> </span><span class=s>other</span><span class=nv> </span><span class=s>{#</span><span class=nv> </span><span class=s>new</span><span class=nv> </span><span class=s>messages}}.&quot;</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=p>{</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>    </span><span class=nt>&quot;greeting&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Hello, {name}! You have {count, plural, one {# new message} other {# new messages}}.&quot;</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>    </span><span class=nt>&lt;greeting&gt;</span>Hello,<span class=w> </span>{name}!<span class=w> </span>You<span class=w> </span>have<span class=w> </span>{count,<span class=w> </span>plural,<span class=w> </span>one<span class=w> </span>{#<span class=w> </span>new<span class=w> </span>message}<span class=w> </span>other<span class=w> </span>{#<span class=w> </span>new<span class=w> </span>messages}}.<span class=nt>&lt;/greeting&gt;</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <p><strong>Usage:</strong></p> <div class="language-python highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>)</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>greeting</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;Alice&quot;</span><span class=p>,</span> <span class=n>count</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>   <span class=c1># Output: Hello, Alice! You have 1 new message.</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>greeting</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;Bob&quot;</span><span class=p>,</span> <span class=n>count</span><span class=o>=</span><span class=mi>5</span><span class=p>))</span>     <span class=c1># Output: Hello, Bob! You have 5 new messages.</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If your ICUMF string contains <strong>only</strong> variable interpolation (without pluralization or formatters), it won't be processed as ICUMF. Instead, it will use standard Python formatting (<code>str.format()</code>).</p> </div> <h2 id=pluralization-and-selectordinal>Pluralization and Selectordinal<a class=headerlink href=#pluralization-and-selectordinal title="Permanent link">#</a></h2> <p>ICUMF supports pluralization using the <code>plural</code> and <code>selectordinal</code> formats. You can define different message forms based on the numeric value of a variable.</p> <div class="tabbed-set tabbed-alternate" data-tabs=4:3><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><input id=__tabbed_4_2 name=__tabbed_4 type=radio><input id=__tabbed_4_3 name=__tabbed_4 type=radio><div class=tabbed-labels><label for=__tabbed_4_1>YAML</label><label for=__tabbed_4_2>JSON</label><label for=__tabbed_4_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=nt>item_count</span><span class=p>:</span><span class=w> </span><span class=s>&quot;You</span><span class=nv> </span><span class=s>have</span><span class=nv> </span><span class=s>{count,</span><span class=nv> </span><span class=s>plural,</span><span class=nv> </span><span class=s>one</span><span class=nv> </span><span class=s>{#</span><span class=nv> </span><span class=s>item}</span><span class=nv> </span><span class=s>other</span><span class=nv> </span><span class=s>{#</span><span class=nv> </span><span class=s>items}}</span><span class=nv> </span><span class=s>in</span><span class=nv> </span><span class=s>your</span><span class=nv> </span><span class=s>cart.&quot;</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=nt>rank</span><span class=p>:</span><span class=w> </span><span class=s>&quot;You</span><span class=nv> </span><span class=s>are</span><span class=nv> </span><span class=s>ranked</span><span class=nv> </span><span class=s>{position,</span><span class=nv> </span><span class=s>selectordinal,</span><span class=nv> </span><span class=s>one</span><span class=nv> </span><span class=s>{#st}</span><span class=nv> </span><span class=s>two</span><span class=nv> </span><span class=s>{#nd}</span><span class=nv> </span><span class=s>few</span><span class=nv> </span><span class=s>{#rd}</span><span class=nv> </span><span class=s>other</span><span class=nv> </span><span class=s>{#th}}</span><span class=nv> </span><span class=s>in</span><span class=nv> </span><span class=s>the</span><span class=nv> </span><span class=s>competition.&quot;</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=p>{</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>    </span><span class=nt>&quot;item_count&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;You have {count, plural, one {# item} other {# items}} in your cart.&quot;</span><span class=p>,</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>    </span><span class=nt>&quot;rank&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;You are ranked {position, selectordinal, one {#st} two {#nd} few {#rd} other {#th}} in the competition.&quot;</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span><span class=nt>&lt;item_count&gt;</span>You<span class=w> </span>have<span class=w> </span>{count,<span class=w> </span>plural,<span class=w> </span>one<span class=w> </span>{#<span class=w> </span>item}<span class=w> </span>other<span class=w> </span>{#<span class=w> </span>items}}<span class=w> </span>in<span class=w> </span>your<span class=w> </span>cart.<span class=nt>&lt;/item_count&gt;</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>    </span><span class=nt>&lt;rank&gt;</span>You<span class=w> </span>are<span class=w> </span>ranked<span class=w> </span>{position,<span class=w> </span>selectordinal,<span class=w> </span>one<span class=w> </span>{#st}<span class=w> </span>two<span class=w> </span>{#nd}<span class=w> </span>few<span class=w> </span>{#rd}<span class=w> </span>other<span class=w> </span>{#th}}<span class=w> </span>in<span class=w> </span>the<span class=w> </span>competition.<span class=nt>&lt;/rank&gt;</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <p><strong>Usage:</strong></p> <div class="language-python highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>)</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>item_count</span><span class=p>(</span><span class=n>count</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>    <span class=c1># Output: You have 1 item in your cart.</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>item_count</span><span class=p>(</span><span class=n>count</span><span class=o>=</span><span class=mi>4</span><span class=p>))</span>    <span class=c1># Output: You have 4 items in your cart.</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>rank</span><span class=p>(</span><span class=n>position</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>       <span class=c1># Output: You are ranked 1st in the competition.</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>rank</span><span class=p>(</span><span class=n>position</span><span class=o>=</span><span class=mi>2</span><span class=p>))</span>       <span class=c1># Output: You are ranked 2nd in the competition.</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>rank</span><span class=p>(</span><span class=n>position</span><span class=o>=</span><span class=mi>3</span><span class=p>))</span>       <span class=c1># Output: You are ranked 3rd in the competition.</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>rank</span><span class=p>(</span><span class=n>position</span><span class=o>=</span><span class=mi>4</span><span class=p>))</span>       <span class=c1># Output: You are ranked 4th in the competition.</span>
</span></code></pre></div> <h2 id=select>Select<a class=headerlink href=#select title="Permanent link">#</a></h2> <p>The <code>select</code> format allows you to define different message forms based on exact string matches (similar to a switch-case statement).</p> <div class="tabbed-set tabbed-alternate" data-tabs=5:3><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><input id=__tabbed_5_2 name=__tabbed_5 type=radio><input id=__tabbed_5_3 name=__tabbed_5 type=radio><div class=tabbed-labels><label for=__tabbed_5_1>YAML</label><label for=__tabbed_5_2>JSON</label><label for=__tabbed_5_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=nt>user_status</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{status,</span><span class=nv> </span><span class=s>select,</span><span class=nv> </span><span class=s>active</span><span class=nv> </span><span class=s>{Welcome</span><span class=nv> </span><span class=s>back!}</span><span class=nv> </span><span class=s>inactive</span><span class=nv> </span><span class=s>{Please</span><span class=nv> </span><span class=s>activate</span><span class=nv> </span><span class=s>your</span><span class=nv> </span><span class=s>account.}</span><span class=nv> </span><span class=s>banned</span><span class=nv> </span><span class=s>{Your</span><span class=nv> </span><span class=s>account</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>banned.}</span><span class=nv> </span><span class=s>other</span><span class=nv> </span><span class=s>{Hello,</span><span class=nv> </span><span class=s>guest!}}&quot;</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=nt>gender_greeting</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{gender,</span><span class=nv> </span><span class=s>select,</span><span class=nv> </span><span class=s>male</span><span class=nv> </span><span class=s>{Hello,</span><span class=nv> </span><span class=s>sir!}</span><span class=nv> </span><span class=s>female</span><span class=nv> </span><span class=s>{Hello,</span><span class=nv> </span><span class=s>miss!}</span><span class=nv> </span><span class=s>other</span><span class=nv> </span><span class=s>{Hello!}}&quot;</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=p>{</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=w>    </span><span class=nt>&quot;user_status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;{status, select, active {Welcome back!} inactive {Please activate your account.} banned {Your account is banned.} other {Hello, guest!}}&quot;</span><span class=p>,</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>    </span><span class=nt>&quot;gender_greeting&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;{gender, select, male {Hello, sir!} female {Hello, miss!} other {Hello!}}&quot;</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=w>    </span><span class=nt>&lt;user_status&gt;</span>{status,<span class=w> </span>select,<span class=w> </span>active<span class=w> </span>{Welcome<span class=w> </span>back!}<span class=w> </span>inactive<span class=w> </span>{Please<span class=w> </span>activate<span class=w> </span>your<span class=w> </span>account.}<span class=w> </span>banned<span class=w> </span>{Your<span class=w> </span>account<span class=w> </span>is<span class=w> </span>banned.}<span class=w> </span>other<span class=w> </span>{Hello,<span class=w> </span>guest!}}<span class=nt>&lt;/user_status&gt;</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=w>    </span><span class=nt>&lt;gender_greeting&gt;</span>{gender,<span class=w> </span>select,<span class=w> </span>male<span class=w> </span>{Hello,<span class=w> </span>sir!}<span class=w> </span>female<span class=w> </span>{Hello,<span class=w> </span>miss!}<span class=w> </span>other<span class=w> </span>{Hello!}}<span class=nt>&lt;/gender_greeting&gt;</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <p><strong>Usage:</strong></p> <div class="language-python highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>)</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>user_status</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=s2>&quot;active&quot;</span><span class=p>))</span>    <span class=c1># Output: Welcome back!</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>user_status</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=s2>&quot;inactive&quot;</span><span class=p>))</span>  <span class=c1># Output: Please activate your account.</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>user_status</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=s2>&quot;banned&quot;</span><span class=p>))</span>    <span class=c1># Output: Your account is banned.</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>user_status</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=s2>&quot;other&quot;</span><span class=p>))</span>     <span class=c1># Output: Hello, guest!</span>
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>gender_greeting</span><span class=p>(</span><span class=n>gender</span><span class=o>=</span><span class=s2>&quot;male&quot;</span><span class=p>))</span>    <span class=c1># Output: Hello, sir!</span>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>gender_greeting</span><span class=p>(</span><span class=n>gender</span><span class=o>=</span><span class=s2>&quot;female&quot;</span><span class=p>))</span>  <span class=c1># Output: Hello, miss!</span>
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>gender_greeting</span><span class=p>(</span><span class=n>gender</span><span class=o>=</span><span class=s2>&quot;other&quot;</span><span class=p>))</span>   <span class=c1># Output: Hello!</span>
</span></code></pre></div> <h2 id=formatters>Formatters<a class=headerlink href=#formatters title="Permanent link">#</a></h2> <p>Out of the box, doti18n supports the <code>date</code> formatter. You can also implement custom formatters by extending the <code>BaseFormatter</code> class. See the <a href=#custom-formatters>Custom Formatters</a> section for details.</p> <div class="tabbed-set tabbed-alternate" data-tabs=6:3><input checked=checked id=__tabbed_6_1 name=__tabbed_6 type=radio><input id=__tabbed_6_2 name=__tabbed_6 type=radio><input id=__tabbed_6_3 name=__tabbed_6 type=radio><div class=tabbed-labels><label for=__tabbed_6_1>YAML</label><label for=__tabbed_6_2>JSON</label><label for=__tabbed_6_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=nt>appointment</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Your</span><span class=nv> </span><span class=s>appointment</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>on</span><span class=nv> </span><span class=s>{date,</span><span class=nv> </span><span class=s>date,</span><span class=nv> </span><span class=s>short}.&quot;</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=nt>now</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Current</span><span class=nv> </span><span class=s>date</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>time:</span><span class=nv> </span><span class=s>{now,</span><span class=nv> </span><span class=s>date,</span><span class=nv> </span><span class=s>long}.&quot;</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=nt>custom</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Custom</span><span class=nv> </span><span class=s>formatted</span><span class=nv> </span><span class=s>date:</span><span class=nv> </span><span class=s>{date,</span><span class=nv> </span><span class=s>date,</span><span class=nv> </span><span class=s>%A,</span><span class=nv> </span><span class=s>%d</span><span class=nv> </span><span class=s>%B</span><span class=nv> </span><span class=s>%Y</span><span class=nv> </span><span class=s>year,</span><span class=nv> </span><span class=s>%H:%M:%S</span><span class=nv> </span><span class=s>(%Z)}.&quot;</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=p>{</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>    </span><span class=nt>&quot;appointment&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Your appointment is on {date, date, short}.&quot;</span><span class=p>,</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>    </span><span class=nt>&quot;now&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Current date and time: {now, date, long}.&quot;</span><span class=p>,</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>    </span><span class=nt>&quot;custom&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Custom formatted date: {date, date, %A, %d %B %Y year, %H:%M:%S (%Z)}.&quot;</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=w>    </span><span class=nt>&lt;appointment&gt;</span>Your<span class=w> </span>appointment<span class=w> </span>is<span class=w> </span>on<span class=w> </span>{date,<span class=w> </span>date,<span class=w> </span>short}.<span class=nt>&lt;/appointment&gt;</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=w>    </span><span class=nt>&lt;now&gt;</span>Current<span class=w> </span>date<span class=w> </span>and<span class=w> </span>time:<span class=w> </span>{now,<span class=w> </span>date,<span class=w> </span>long}.<span class=nt>&lt;/now&gt;</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=w>    </span><span class=nt>&lt;custom&gt;</span>Custom<span class=w> </span>formatted<span class=w> </span>date:<span class=w> </span>{date,<span class=w> </span>date,<span class=w> </span>%A,<span class=w> </span>%d<span class=w> </span>%B<span class=w> </span>%Y<span class=w> </span>year,<span class=w> </span>%H:%M:%S<span class=w> </span>(%Z)}.<span class=nt>&lt;/custom&gt;</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <p><strong>Usage:</strong></p> <div class="language-python highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=kn>from</span><span class=w> </span><span class=nn>datetime</span><span class=w> </span><span class=kn>import</span> <span class=n>datetime</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=kn>from</span><span class=w> </span><span class=nn>zoneinfo</span><span class=w> </span><span class=kn>import</span> <span class=n>ZoneInfo</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>)</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=n>now</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>(</span><span class=n>tz</span><span class=o>=</span><span class=n>ZoneInfo</span><span class=p>(</span><span class=s2>&quot;UTC&quot;</span><span class=p>))</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>appointment</span><span class=p>(</span><span class=n>date</span><span class=o>=</span><span class=n>now</span><span class=p>))</span>  <span class=c1># Output: Your appointment is on 29.01.2026.</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>now</span><span class=p>(</span><span class=n>now</span><span class=o>=</span><span class=n>now</span><span class=p>))</span>           <span class=c1># Output: Current date and time: 29.01.2026 22:30:19.</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>custom</span><span class=p>(</span><span class=n>date</span><span class=o>=</span><span class=n>now</span><span class=p>))</span>       <span class=c1># Output: Custom formatted date: Thursday, 29 January 2026 year, 22:30:19 (UTC).</span>
</span></code></pre></div> <h2 id=escaping>Escaping<a class=headerlink href=#escaping title="Permanent link">#</a></h2> <p>To include literal characters that are reserved for ICUMF formatting (like <code>{</code> or <code>}</code>), use single quotes <code>'</code> to escape the sequence. To include a single quote itself, use two single quotes <code>''</code>.</p> <div class="tabbed-set tabbed-alternate" data-tabs=7:3><input checked=checked id=__tabbed_7_1 name=__tabbed_7 type=radio><input id=__tabbed_7_2 name=__tabbed_7 type=radio><input id=__tabbed_7_3 name=__tabbed_7 type=radio><div class=tabbed-labels><label for=__tabbed_7_1>YAML</label><label for=__tabbed_7_2>JSON</label><label for=__tabbed_7_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=nt>escaped</span><span class=p>:</span><span class=w> </span><span class=s>&quot;This</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>literal</span><span class=nv> </span><span class=s>brace:</span><span class=nv> </span><span class=s>&#39;{&#39;</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>this</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>single</span><span class=nv> </span><span class=s>quote:</span><span class=nv> </span><span class=s>&#39;&#39;.&quot;</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=p>{</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=w>    </span><span class=nt>&quot;escaped&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;This is a literal brace: &#39;{&#39; and this is a single quote: &#39;&#39;.&quot;</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=w>    </span><span class=nt>&lt;escaped&gt;</span>This<span class=w> </span>is<span class=w> </span>a<span class=w> </span>literal<span class=w> </span>brace:<span class=w> </span>&#39;{&#39;<span class=w> </span>and<span class=w> </span>this<span class=w> </span>is<span class=w> </span>a<span class=w> </span>single<span class=w> </span>quote:<span class=w> </span>&#39;&#39;.<span class=nt>&lt;/escaped&gt;</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <p><strong>Usage:</strong></p> <div class="language-python highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>)</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>escaped</span><span class=p>())</span>  <span class=c1># Output: This is a literal brace: { and this is a single quote: &#39;.</span>
</span></code></pre></div> <h2 id=nesting>Nesting<a class=headerlink href=#nesting title="Permanent link">#</a></h2> <p>ICUMF supports nesting constructs to build complex logic. You can place pluralization, select, and other formats inside each other.</p> <div class="tabbed-set tabbed-alternate" data-tabs=8:3><input checked=checked id=__tabbed_8_1 name=__tabbed_8 type=radio><input id=__tabbed_8_2 name=__tabbed_8 type=radio><input id=__tabbed_8_3 name=__tabbed_8 type=radio><div class=tabbed-labels><label for=__tabbed_8_1>YAML</label><label for=__tabbed_8_2>JSON</label><label for=__tabbed_8_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=nt>backpack</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=w>    </span><span class=no>You have {item, select,</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=w>        </span><span class=no>book {{count, plural, one {# book} other {# books}}} </span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=w>        </span><span class=no>pen {{count, plural, one {# pen} other {# pens}}} </span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a><span class=w>        </span><span class=no>other {{count} items}</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=w>    </span><span class=no>} in your backpack.</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=p>{</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=w>    </span><span class=nt>&quot;backpack&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;You have {item, select, book {{count, plural, one {# book} other {# books}}} pen {{count, plural, one {# pen} other {# pens}}} other {{count} items}} in your backpack.&quot;</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=w>    </span><span class=nt>&lt;backpack&gt;</span>You<span class=w> </span>have<span class=w> </span>{item,<span class=w> </span>select,<span class=w> </span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=w>                  </span>book<span class=w> </span>{{count,<span class=w> </span>plural,<span class=w> </span>one<span class=w> </span>{#<span class=w> </span>book}<span class=w> </span>other<span class=w> </span>{#<span class=w> </span>books}}}<span class=w> </span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=w>                  </span>pen<span class=w> </span>{{count,<span class=w> </span>plural,<span class=w> </span>one<span class=w> </span>{#<span class=w> </span>pen}<span class=w> </span>other<span class=w> </span>{#<span class=w> </span>pens}}}<span class=w> </span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=w>                  </span>other<span class=w> </span>{{count}<span class=w> </span>items}
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=w>                  </span>}<span class=w> </span>in<span class=w> </span>your<span class=w> </span>backpack.
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=w>    </span><span class=nt>&lt;/backpack&gt;</span>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <div class="admonition note"> <p class=admonition-title>Important: Variable Context</p> <p>Notice the <code>other</code> option in the example above. Inside <code>other</code>, we use <code>{count}</code> instead of <code>#</code>.</p> <p>The hash symbol (<code>#</code>) represents the count <strong>only</strong> within sub-numeric formatters (like <code>plural</code> or <code>selectordinal</code>). Since <code>select</code> is not numeric, you must use the standard <code>{count}</code> interpolation variable there.</p> </div> <p><strong>Usage:</strong></p> <div class="language-python highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>)</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>backpack</span><span class=p>(</span><span class=n>item</span><span class=o>=</span><span class=s2>&quot;book&quot;</span><span class=p>,</span> <span class=n>count</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>    <span class=c1># Output: You have 1 book in your backpack.</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>backpack</span><span class=p>(</span><span class=n>item</span><span class=o>=</span><span class=s2>&quot;book&quot;</span><span class=p>,</span> <span class=n>count</span><span class=o>=</span><span class=mi>3</span><span class=p>))</span>    <span class=c1># Output: You have 3 books in your backpack.</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>backpack</span><span class=p>(</span><span class=n>item</span><span class=o>=</span><span class=s2>&quot;pen&quot;</span><span class=p>,</span> <span class=n>count</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>     <span class=c1># Output: You have 1 pen in your backpack.</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>backpack</span><span class=p>(</span><span class=n>item</span><span class=o>=</span><span class=s2>&quot;pen&quot;</span><span class=p>,</span> <span class=n>count</span><span class=o>=</span><span class=mi>5</span><span class=p>))</span>     <span class=c1># Output: You have 5 pens in your backpack.</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class=c1># This uses the &#39;other&#39; case.</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>backpack</span><span class=p>(</span><span class=n>item</span><span class=o>=</span><span class=s2>&quot;sword&quot;</span><span class=p>,</span> <span class=n>count</span><span class=o>=</span><span class=mi>10</span><span class=p>))</span>  <span class=c1># Output: You have 10 items in your backpack.</span>
</span></code></pre></div> <h2 id=whitespaces>Whitespaces<a class=headerlink href=#whitespaces title="Permanent link">#</a></h2> <p>ICUMF ignores whitespace characters (spaces, tabs, newlines) outside of the message text. You can format your ICUMF strings for better readability without affecting the logic.</p> <p>However, be careful when using multi-line strings in YAML or XML, as indentation inside the message string itself (e.g., inside <code>{...}</code>) might be preserved depending on how the file is parsed.</p> <div class="tabbed-set tabbed-alternate" data-tabs=9:3><input checked=checked id=__tabbed_9_1 name=__tabbed_9 type=radio><input id=__tabbed_9_2 name=__tabbed_9 type=radio><input id=__tabbed_9_3 name=__tabbed_9 type=radio><div class=tabbed-labels><label for=__tabbed_9_1>YAML</label><label for=__tabbed_9_2>JSON</label><label for=__tabbed_9_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=nt>cart</span><span class=p>:</span><span class=w> </span><span class=s>&quot;You</span><span class=nv> </span><span class=s>have</span><span class=nv> </span><span class=s>{count,</span><span class=nv> </span><span class=s>plural,</span><span class=nv> </span><span class=s>one</span><span class=nv> </span><span class=s>{</span><span class=nv>  </span><span class=s>#</span><span class=nv> </span><span class=s>item</span><span class=nv>  </span><span class=s>}</span><span class=nv> </span><span class=s>other</span><span class=nv> </span><span class=s>{</span><span class=nv>  </span><span class=s>#</span><span class=nv> </span><span class=s>items</span><span class=nv>  </span><span class=s>}}</span><span class=nv> </span><span class=s>in</span><span class=nv> </span><span class=s>your</span><span class=nv> </span><span class=s>cart.&quot;</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=p>{</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=w>    </span><span class=nt>&quot;cart&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;You have {count, plural, one {  # item  } other {  # items  }} in your cart.&quot;</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=w>    </span><span class=nt>&lt;cart&gt;</span>You<span class=w> </span>have<span class=w> </span>{count,<span class=w> </span>plural,<span class=w> </span>one<span class=w> </span>{<span class=w>  </span>#<span class=w> </span>item<span class=w>  </span>}<span class=w> </span>other<span class=w> </span>{<span class=w>  </span>#<span class=w> </span>items<span class=w>  </span>}}<span class=w> </span>in<span class=w> </span>your<span class=w> </span>cart.<span class=nt>&lt;/cart&gt;</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <p><strong>Usage:</strong></p> <div class="language-python highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>)</span>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>cart</span><span class=p>(</span><span class=n>count</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>   <span class=c1># Output: You have   1 item   in your cart.</span>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>cart</span><span class=p>(</span><span class=n>count</span><span class=o>=</span><span class=mi>4</span><span class=p>))</span>   <span class=c1># Output: You have   4 items   in your cart.</span>
</span></code></pre></div> <p>As seen above, the extra spaces explicitly placed inside the plural forms (<code>{ # item }</code>) are preserved in the output.</p> <h2 id=custom-formatters>Custom Formatters<a class=headerlink href=#custom-formatters title="Permanent link">#</a></h2> <h3 id=requirements>Requirements<a class=headerlink href=#requirements title="Permanent link">#</a></h3> <p>To create a custom formatter, define a class that inherits from <code>doti18n.icumf.formatter.BaseFormatter</code> and meets these criteria:</p> <ol> <li><strong><code>name</code></strong>: A string representing the formatter's name (e.g., <code>"crypto"</code>).</li> <li><strong><code>is_subnumeric</code></strong>: Boolean. True if the formatter logic depends on a numeric count (like <code>plural</code>).</li> <li><strong><code>is_submessage</code></strong>: Boolean. True if the formatter contains nested messages (like <code>select</code>).</li> <li><strong><code>__init__</code></strong>: Must accept a <code>strict: bool</code> argument.</li> <li><strong><code>__call__</code></strong>: Must implement the formatting logic and accept/return parameters as defined in the parent class.</li> </ol> <h3 id=example-implementation>Example Implementation<a class=headerlink href=#example-implementation title="Permanent link">#</a></h3> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>If you are unsure how to implement a sub-numeric or sub-message formatter, refer to the source code of built-in formatters in the <code>doti18n.icumf.formatters</code> module.</p> </div> <div class="tabbed-set tabbed-alternate" data-tabs=10:3><input checked=checked id=__tabbed_10_1 name=__tabbed_10 type=radio><input id=__tabbed_10_2 name=__tabbed_10 type=radio><input id=__tabbed_10_3 name=__tabbed_10 type=radio><div class=tabbed-labels><label for=__tabbed_10_1>YAML</label><label for=__tabbed_10_2>JSON</label><label for=__tabbed_10_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=nt>crypto</span><span class=p>:</span><span class=w> </span><span class=s>&quot;You</span><span class=nv> </span><span class=s>have</span><span class=nv> </span><span class=s>{value,</span><span class=nv> </span><span class=s>crypto,</span><span class=nv> </span><span class=s>usdt}</span><span class=nv> </span><span class=s>in</span><span class=nv> </span><span class=s>your</span><span class=nv> </span><span class=s>wallet.&quot;</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=p>{</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=w>    </span><span class=nt>&quot;crypto&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;You have {value, crypto, usdt} in your wallet.&quot;</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=w>    </span><span class=nt>&lt;crypto&gt;</span>You<span class=w> </span>have<span class=w> </span>{value,<span class=w> </span>crypto,<span class=w> </span>usdt}<span class=w> </span>in<span class=w> </span>your<span class=w> </span>wallet.<span class=nt>&lt;/crypto&gt;</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <div class="language-python highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n.icumf.formatters</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseFormatter</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n.icumf.nodes</span><span class=w> </span><span class=kn>import</span> <span class=n>Node</span><span class=p>,</span> <span class=n>FormatNode</span><span class=p>,</span> <span class=n>TextNode</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Sequence</span><span class=p>,</span> <span class=n>Optional</span>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=c1># import some_external_crypto_library as clib</span>
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a>
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=k>class</span><span class=w> </span><span class=nc>CryptoFormatter</span><span class=p>(</span><span class=n>BaseFormatter</span><span class=p>):</span>
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a>    <span class=n>name</span> <span class=o>=</span> <span class=s2>&quot;crypto&quot;</span>
</span><span id=__span-40-9><a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a>    <span class=n>is_subnumeric</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-40-10><a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a>    <span class=n>is_submessage</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-40-11><a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a>
</span><span id=__span-40-12><a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>strict</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>):</span>
</span><span id=__span-40-13><a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_strict</span> <span class=o>=</span> <span class=n>strict</span>
</span><span id=__span-40-14><a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a>
</span><span id=__span-40-15><a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a>    <span class=k>def</span><span class=w> </span><span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>t</span><span class=p>:</span> <span class=s2>&quot;LocaleTranslator&quot;</span><span class=p>,</span> <span class=n>node</span><span class=p>:</span> <span class=n>Node</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Sequence</span><span class=p>[</span><span class=n>Optional</span><span class=p>[</span><span class=n>Node</span><span class=p>]]:</span>
</span><span id=__span-40-16><a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>FormatNode</span><span class=p>):</span>
</span><span id=__span-40-17><a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a>            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s2>&quot;CryptoFormatter can only process FormatNode instances.&quot;</span><span class=p>)</span>
</span><span id=__span-40-18><a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a>
</span><span id=__span-40-19><a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a>        <span class=n>value</span> <span class=o>=</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>node</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span><span id=__span-40-20><a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a>        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-40-21><a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_strict</span><span class=p>:</span>
</span><span id=__span-40-22><a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Missing value for &#39;</span><span class=si>{</span><span class=n>node</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>&#39; in CryptoFormatter.&quot;</span><span class=p>)</span>
</span><span id=__span-40-23><a id=__codelineno-40-23 name=__codelineno-40-23 href=#__codelineno-40-23></a>            <span class=k>else</span><span class=p>:</span>
</span><span id=__span-40-24><a id=__codelineno-40-24 name=__codelineno-40-24 href=#__codelineno-40-24></a>                <span class=k>return</span> <span class=p>[]</span>  <span class=c1># Return empty for graceful degradation</span>
</span><span id=__span-40-25><a id=__codelineno-40-25 name=__codelineno-40-25 href=#__codelineno-40-25></a>
</span><span id=__span-40-26><a id=__codelineno-40-26 name=__codelineno-40-26 href=#__codelineno-40-26></a>        <span class=c1># Assume clib.format converts coins to the style (e.g., USDT)</span>
</span><span id=__span-40-27><a id=__codelineno-40-27 name=__codelineno-40-27 href=#__codelineno-40-27></a>        <span class=c1># formatted_value = clib.format(value, node.style)</span>
</span><span id=__span-40-28><a id=__codelineno-40-28 name=__codelineno-40-28 href=#__codelineno-40-28></a>        <span class=n>formatted_value</span> <span class=o>=</span> <span class=s2>&quot;84467,51&quot;</span> <span class=c1># Mock result</span>
</span><span id=__span-40-29><a id=__codelineno-40-29 name=__codelineno-40-29 href=#__codelineno-40-29></a>
</span><span id=__span-40-30><a id=__codelineno-40-30 name=__codelineno-40-30 href=#__codelineno-40-30></a>        <span class=k>return</span> <span class=p>[</span><span class=n>TextNode</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>formatted_value</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=n>node</span><span class=o>.</span><span class=n>style</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)]</span>
</span><span id=__span-40-31><a id=__codelineno-40-31 name=__codelineno-40-31 href=#__codelineno-40-31></a>
</span><span id=__span-40-32><a id=__codelineno-40-32 name=__codelineno-40-32 href=#__codelineno-40-32></a><span class=c1># Register formatter (by defining/importing it) BEFORE LocaleData initialization</span>
</span><span id=__span-40-33><a id=__codelineno-40-33 name=__codelineno-40-33 href=#__codelineno-40-33></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>)</span>
</span><span id=__span-40-34><a id=__codelineno-40-34 name=__codelineno-40-34 href=#__codelineno-40-34></a>
</span><span id=__span-40-35><a id=__codelineno-40-35 name=__codelineno-40-35 href=#__codelineno-40-35></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>crypto</span><span class=p>(</span><span class=n>value</span><span class=o>=</span><span class=s2>&quot;123 BTC&quot;</span><span class=p>))</span>  <span class=c1># Output: You have 84467,51 USDT in your wallet.</span>
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>Execution Order</p> <p>You <strong>must</strong> define or import your custom formatter <strong>before</strong> creating the <code>LocaleData</code> or <code>Loader</code> instance.</p> <p><strong>Why?</strong> The ICUMF manager registers all available formatters at initialization. If your custom formatter is defined later, it won't be registered.</p> </div> <h2 id=tags-html-support>Tags &amp; HTML Support<a class=headerlink href=#tags-html-support title="Permanent link">#</a></h2> <p>doti18n's parser supports XML/HTML-like tags out of the box. By default, they are rendered "as is" (useful for web apps), but you can intercept and transform them  for example, to convert HTML tags into Markdown for Telegram bots or console output. You also can implent your own tag formatter (see <a href=./#custom-formatters>custom formatters</a>) to handle custom tags or give it in another format.</p> <h3 id=basic-usage>Basic Usage<a class=headerlink href=#basic-usage title="Permanent link">#</a></h3> <p>Tags are parsed as structured nodes, not just text. This ensures that opening and closing tags match (unless <code>strict_tags=False</code>).</p> <div class="tabbed-set tabbed-alternate" data-tabs=11:3><input checked=checked id=__tabbed_11_1 name=__tabbed_11 type=radio><input id=__tabbed_11_2 name=__tabbed_11 type=radio><input id=__tabbed_11_3 name=__tabbed_11 type=radio><div class=tabbed-labels><label for=__tabbed_11_1>YAML</label><label for=__tabbed_11_2>JSON</label><label for=__tabbed_11_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=nt>welcome</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Welcome,</span><span class=nv> </span><span class=s>&lt;b&gt;{name}&lt;/b&gt;!</span><span class=nv> </span><span class=s>Click</span><span class=nv> </span><span class=s>&lt;link&gt;here&lt;/link&gt;.&quot;</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=p>{</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a><span class=w>    </span><span class=nt>&quot;welcome&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Welcome, &lt;b&gt;{name}&lt;/b&gt;! Click &lt;link&gt;here&lt;/link&gt;.&quot;</span>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=w>    </span><span class=nt>&lt;welcome&gt;</span>Welcome,<span class=w> </span><span class=nt>&lt;b&gt;</span>{name}<span class=nt>&lt;/b&gt;</span>!<span class=w> </span>Click<span class=w> </span><span class=nt>&lt;link&gt;</span>here<span class=nt>&lt;/link&gt;</span>.<span class=nt>&lt;/welcome&gt;</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <p><strong>Usage (Default HTML behavior):</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>welcome</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;User&quot;</span><span class=p>))</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a><span class=c1># Output: Welcome, &lt;b&gt;User&lt;/b&gt;! Click &lt;link&gt;here&lt;/link&gt;.</span>
</span></code></pre></div></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The ICUMF parser does not support self-closing tags (like <code>&lt;br/&gt;</code>) or tags with attributes (like <code>&lt;a href="..."&gt;</code>). Such tags are returned as-is, and a warning is logged if <code>strict_tags=True</code>.</p> <p>By default, <code>doti18n</code> converts <code>&lt;link&gt;</code> tags into HTML <code>&lt;a&gt;</code> tags with <code>href</code> attributes. You can customize this behavior by implementing a custom tag formatter (see below).</p> <p>If you need to include unsupported tags, consider escaping them with single quotes (<code>'&lt;br/'&gt;</code>, <code>'&lt;a href="..."'&gt;</code>) or using placeholders instead (e.g., <code>{line_break}</code>) and passing the values as arguments.</p> </div> <h3 id=custom-tag-processing-html-to-markdown>Custom Tag Processing (HTML to Markdown)<a class=headerlink href=#custom-tag-processing-html-to-markdown title="Permanent link">#</a></h3> <p>To transform tags, you need to implement a custom formatter (or use built-in) class and inject it into the <code>ICUMF</code> configuration via the <code>tag_formatter</code> argument.</p> <p>The formatter receives a <code>TagNode</code> which contains <code>children</code> (the content inside the tag).</p> <p><strong>Example: Converting <code>&lt;b&gt;</code> to <code>**</code> and <code>&lt;i&gt;</code> to <code>__</code></strong></p> <div class="tabbed-set tabbed-alternate" data-tabs=12:3><input checked=checked id=__tabbed_12_1 name=__tabbed_12 type=radio><input id=__tabbed_12_2 name=__tabbed_12 type=radio><input id=__tabbed_12_3 name=__tabbed_12 type=radio><div class=tabbed-labels><label for=__tabbed_12_1>YAML</label><label for=__tabbed_12_2>JSON</label><label for=__tabbed_12_3>XML</label></div> <div class=tabbed-content> <div class=tabbed-block> <p><code>locales/en.yaml</code>: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=nt>msg</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Hello</span><span class=nv> </span><span class=s>&lt;b&gt;{name}&lt;/b&gt;,</span><span class=nv> </span><span class=s>this</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>&lt;i&gt;italic&lt;/i&gt;.&quot;</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.json</code>: <div class="language-json highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=p>{</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=w>    </span><span class=nt>&quot;msg&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Hello &lt;b&gt;{name}&lt;/b&gt;, this is &lt;i&gt;italic&lt;/i&gt;.&quot;</span>
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=p>}</span>
</span></code></pre></div></p> </div> <div class=tabbed-block> <p><code>locales/en.xml</code>: <div class="language-xml highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=nt>&lt;locale&gt;</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=w>    </span><span class=nt>&lt;msg&gt;</span>Hello<span class=w> </span><span class=nt>&lt;b&gt;</span>{name}<span class=nt>&lt;/b&gt;</span>,<span class=w> </span>this<span class=w> </span>is<span class=w> </span><span class=nt>&lt;i&gt;</span>italic<span class=nt>&lt;/i&gt;</span>.<span class=nt>&lt;/msg&gt;</span>
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=nt>&lt;/locale&gt;</span>
</span></code></pre></div></p> </div> </div> </div> <div class="language-python highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n</span><span class=w> </span><span class=kn>import</span> <span class=n>LocaleData</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n.loaders</span><span class=w> </span><span class=kn>import</span> <span class=n>Loader</span>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n.icumf</span><span class=w> </span><span class=kn>import</span> <span class=n>ICUMF</span>
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=kn>from</span><span class=w> </span><span class=nn>doti18n.icumf.formatters</span><span class=w> </span><span class=kn>import</span> <span class=n>MarkdownFormatter</span>
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a>
</span><span id=__span-48-6><a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a><span class=c1># Initialize ICUMF with the custom tag formatter</span>
</span><span id=__span-48-7><a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a><span class=n>icumf</span> <span class=o>=</span> <span class=n>ICUMF</span><span class=p>(</span><span class=n>tag_formatter</span><span class=o>=</span><span class=n>MarkdownFormatter</span><span class=p>)</span>
</span><span id=__span-48-8><a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a><span class=n>loader</span> <span class=o>=</span> <span class=n>Loader</span><span class=p>(</span><span class=n>icumf</span><span class=o>=</span><span class=n>icumf</span><span class=p>)</span>
</span><span id=__span-48-9><a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a><span class=n>i18n</span> <span class=o>=</span> <span class=n>LocaleData</span><span class=p>(</span><span class=s2>&quot;locales&quot;</span><span class=p>,</span> <span class=n>loader</span><span class=o>=</span><span class=n>loader</span><span class=p>)</span>
</span><span id=__span-48-10><a id=__codelineno-48-10 name=__codelineno-48-10 href=#__codelineno-48-10></a>
</span><span id=__span-48-11><a id=__codelineno-48-11 name=__codelineno-48-11 href=#__codelineno-48-11></a><span class=nb>print</span><span class=p>(</span><span class=n>i18n</span><span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>msg</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;Alice&quot;</span><span class=p>))</span>  <span class=c1># Output: Hello **Alice**, this is __italic__.</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Nested Tags</p> <p>Since the formatter returns the original <code>node.children</code>, doti18n continues to process the content inside the tag. This means nesting (e.g., <code>&lt;b&gt;&lt;i&gt;Text&lt;/i&gt;&lt;/b&gt;</code>) works automatically with your custom formatter.</p> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../formatting/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Formatting"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Formatting </div> </div> </a> <a href=../custom_loaders/ class="md-footer__link md-footer__link--next" aria-label="Next: Custom Loaders"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Custom Loaders </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2026 darkj3suss </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "navigation.tracking", "navigation.footer", "navigation.instant", "navigation.indexes", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.tooltips", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../assets/javascripts/logo.js></script> </body> </html>